<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Secret Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    font-family: monospace;
    background: #f7f4ee;
    color: #111;
  }

  header {
    text-align: center;
    padding: 10px;
    font-weight: bold;
    background: #ddd;
  }

  #container {
    max-width: 800px;
    margin: 40px auto;
    padding: 20px;
    background: #fff;
    border-left: 4px solid #888;
  }

  #secret {
    white-space: pre-wrap;
    text-align: left;
    line-height: 1.8;
    user-select: none;
  }

  button {
    padding: 8px 12px;
    margin: 5px;
    font-size: 14px;
  }

  #settingsBtn {
    position: fixed;
    bottom: 20px;
    right: 20px;
  }

  .panel {
    position: fixed;
    bottom: 70px;
    right: 20px;
    background: #fff;
    border: 1px solid #000;
    padding: 10px;
    display: none;
  }
</style>
</head>

<body>

<header>Made by SUPRAMAN (HASNAAT)</header>

<div id="container">
  <div id="secret"></div>
</div>

<button id="settingsBtn" onclick="openSettings()">âš™ï¸ Settings</button>

<div class="panel" id="settingsPanel">
  <button onclick="editSecret()">âœï¸ Edit Secret</button><br>
  <button onclick="translateSecret()">ğŸŒ Translate</button><br>
  <button onclick="showVisitors()">ğŸ‘ Visitors</button><br>
  <button onclick="closeSettings()">âŒ Close</button>
</div>

<script>
/* ================= PASSWORD ================= */
const PASSWORD = "CrimsonThorn";

/* ================= SECRET TEXT ================= */
let secretText = `
1. I have observed many things quietly over time.
2. People often reveal more than they realize.
3. Small actions speak louder than big words.
4. Trust is built slowly but breaks instantly.
5. Every person has patterns they repeat.
6. Silence is sometimes more revealing than speech.
7. Reactions expose hidden emotions.
8. Behavior changes when someone feels watched.
9. Everyone hides something, knowingly or unknowingly.
10. This page exists to remind me of that.
`;

/* ================= SCRAMBLE ================= */
function scrambleText(text) {
  return text.split("").map(c => {
    if (c === " " || c === "\n") return c;
    return String.fromCharCode(c.charCodeAt(0) + Math.floor(Math.random() * 5) + 1);
  }).join("");
}

function updateScramble() {
  document.getElementById("secret").innerText = scrambleText(secretText);
}

setInterval(updateScramble, 2500);
updateScramble();

/* ================= SETTINGS ================= */
function askPassword() {
  return prompt("Enter password:") === PASSWORD;
}

function openSettings() {
  if (!askPassword()) return;
  document.getElementById("settingsPanel").style.display = "block";
}

function closeSettings() {
  document.getElementById("settingsPanel").style.display = "none";
}

/* ================= EDIT ================= */
function editSecret() {
  if (!askPassword()) return;
  const newText = prompt("Edit secret text:", secretText);
  if (newText !== null) secretText = newText;
}

/* ================= TRANSLATE ================= */
function translateSecret() {
  if (!askPassword()) return;
  alert(secretText);
}

/* ================= VISITOR COUNTER ================= */
function getDateKey(offset = 0) {
  const d = new Date();
  d.setDate(d.getDate() + offset);
  return d.toISOString().split("T")[0];
}

const NS = "supraman-secret-web";

// increment today
fetch(`https://countapi.xyz/hit/${NS}/${getDateKey()}`).catch(()=>{});

function showVisitors() {
  if (!askPassword()) return;

  const today = getDateKey(0);
  const yesterday = getDateKey(-1);

  Promise.all([
    fetch(`https://countapi.xyz/get/${NS}/${today}`).then(r=>r.json()).catch(()=>({value:0})),
    fetch(`https://countapi.xyz/get/${NS}/${yesterday}`).then(r=>r.json()).catch(()=>({value:0}))
  ]).then(([t,y])=>{
    alert(
      `Visitor Stats:\n\n` +
      `Today (${today}): ${t.value}\n` +
      `Yesterday (${yesterday}): ${y.value}`
    );
  });
}

/* ================= BLOCK COPYING ================= */
document.addEventListener("copy", e => e.preventDefault());
document.addEventListener("contextmenu", e => e.preventDefault());
</script>

</body>
</html>
